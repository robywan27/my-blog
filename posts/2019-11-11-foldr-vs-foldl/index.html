<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Elucubrations: Foldr vs foldl</title>
    <link rel="canonical" href="http://roby.wan/blog/posts/2019-11-11-foldr-vs-foldl/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <link href="/blog/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/blog/">Elucubrations</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/blog/">Home</a></li>
                <li
                ><a href="/blog/archives/">Archives</a></li>
                
                <li
                >
                <a href="/blog/pages/about/">About me</a>
                </li>
                
                <li><a href="/blog/feed.xml">RSS</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">11 November 2019</div>
        
    </div>
    <h2>Foldr vs foldl</h2>
</div>
<div>
    
    <p>Folding is one important topic in functional programming. It is a pattern exploiting the higher-order capability to compose functions, i.e. functions can be passed other functions arguments or can return a function. This pattern is used to employ common iterative operations over lists which reduce to a single result. This is in fact the algorithm behind the common library function <em>reduce</em> implemented in most common programming languages nowadays. There are two variants of folding depending on the direction in which the computational process unfolds, so either right or left. This gives the names of <em>foldr</em> and <em>foldl</em>. The examples that follow will be written in Haskell for conciseness. I advice the book by Hutton <a href='#fn-1' id='fnref1'><sup>1</sup></a> to have an introduction to these concepts or the  edX MOOC <a href='#fn-2' id='fnref2'><sup>2</sup></a> which also provides plenty of exercises to consolidate the knowledge.</p><h1 id="foldr">Foldr</h1><p>The formula used to express this pattern is the following one, written in Haskell <a href='#fn-3' id='fnref3'><sup>3</sup></a> (the type signature is omitted for simplicity purposes):</p><pre><code>foldr f v &#91;&#93; = v
foldr f v &#40;x : xs&#41; = f x &#40;foldr f v xs&#41;
</code></pre><p>Even though it may look daunting at first sight, it becomes very clear and intuitive once you have grasped the meaning of it. This formula is written in recursive form, so the first line expresses the base case while the second line expresses the recursive case. The left-hand side of the formula is the application of the function <code>foldr</code> on parameters</p><ul><li><code>f</code>, the name of the function<ul><li><code>v</code> , the initial value</li><li><code>&#91;&#93;</code> is the empty list; the base case means that at this point of the computation there are no more elements in the list to consider</li><li><code>&#40;x : xs&#41;</code>, which is the Haskell notation to express a list composed of head (first element) <code>x</code> and tail (all elements from second to last) <code>xs</code></li></ul></li></ul><p>Now for the interesting part, the right-hand side of the formula. In the base case, the function simply returns the initial value. Easy. In the recursive case, function <code>f</code> is applied to the first element of the list <code>x</code>. After that, the <code>foldr</code> function is called recursively on the remaining elements of the list. Now it is clear that the computational process of <code>foldr</code> has a recursive shape. Let's make an example to illustrate what previously said. Turns out that the common higher-order pattern <code>map</code> can be rewritten in terms of <code>foldr</code>: <code>mapR f = foldr &#40;\ x xs -&gt; f x : xs&#41; &#91;&#93;</code>. Here the application of function <code>f</code> over the list is defined in terms of an anonymous function (lambda function) taking two parameters <code>x</code> and <code>xs</code>. The empty list <code>&#91;&#93;</code> is  the initial value (<code>v</code> in the formula above). <code>x</code> represents the first item in the list starting from the end of the list, while <code>xs</code> represents the accumulator. So the lambda function returns a list composed of the function application on element <code>x</code> concatenated with the accumulator <code>xs</code>. To properly understand how the computation unfolds, I find it more intuitive to reason backwards, starting from the last element moving backwards to the first; the accumulator is then compounded starting with the empty list on the right and prepending the elements of the list one by one starting from the last element. For example applying <code>map</code> on list <code>&#91;1,2,3&#93;</code> taking function <code>&#40;&#42;2&#41;</code> gives the list <code>&#91;2,4,6&#93;</code>:</p><pre><code>map &#40;&#42;2&#41; &#91;1,2,3&#93;
&#40;&#40;&#42;2&#41; 1&#41; : &#40;&#40;&#42;2&#41; 2&#41; : &#40;&#40;&#42;2&#41; 3&#41; : &#91;&#93;
2 : 4 :  6 : &#91;&#93; = &#91;2,4,6&#93;
</code></pre><h1 id="foldl">Foldl</h1><p>The formula used to express this pattern is the following one, written in Haskell <a href='#fn-4' id='fnref4'><sup>4</sup></a> (the type signature is omitted for simplicity purposes):</p><pre><code>foldl f v &#91;&#93; = v
foldl f v &#40;x : xs&#41; = foldl f &#40;f v x&#41; xs
</code></pre><p>This function shares many similarities with the one expressed above for <code>foldr</code>. The difference lies in the right-hand side of the recursive case formula. <code>foldl</code> is called recursively, and it is given the following arguments:</p><ul><li><code>f</code>, the function<ul><li><code>&#40;f v x&#41;</code>, is the accumulator, which is given by the application of <code>f</code> on the previous value of the accumulator <code>v</code> and the first element of the list <code>x</code></li><li><code>xs</code>, the remaining elements of the list starting from the second one</li></ul></li></ul><p>It is clear that <code>foldl</code> follows an iterative shape instead, as the algorithm starts by applying the function to the base case and the first element of the list; this is the new accumulator. Then the function is applied to the next element and the accumulator, which results in a new accumulator. This process continues until the end of the list is reached. Note that I have not said that the accumulator assumes a new value at each step, because the evaluation is done after the unwrapping of the list starting from right to left, which gives the name to the pattern. For symmetry, I am going to express the function <code>map</code> using <code>foldl</code>: <code>mapL f = foldl &#40;\ xs x -&gt; xs ++ &#91;f x&#93;&#41; &#91;&#93;</code>. The lambda function takes two parameters: <code>xs</code> is the accumulator, while <code>x</code> is the first element of the list. A list is returned, composed of the application of <code>f</code> on <code>x</code>, to which is prepended the accumulator <code>xs</code>. Note that the accumulator is the initial value <code>&#91;&#93;</code>. So the computation unfolds from left to right, and once the end of the list is reached, it starts folding back from right to left, hence the name. Applying <code>map</code> on list <code>&#91;1,2,3&#93;</code> taking function <code>&#40;&#42;2&#41;</code> gives the list <code>&#91;2,4,6&#93;</code>:</p><pre><code>map &#40;&#42;2&#41; &#91;1,2,3&#93;
&#40;&#40;&#91;&#93; ++ &#91;&#40;&#42;2&#41; 1&#93;&#41; ++ &#91;&#40;&#42;2&#41; 2&#93;&#41; ++ &#91;&#40;&#42;2&#41; 3&#93;
&#91;&#93; ++ &#91;2&#93; ++ &#91;4&#93; ++ &#91;6&#93; = &#91;2,4,6&#93;
</code></pre><p><a href='#fn-5' id='fnref5'><sup>5</sup></a> <a href='http://www.cs.nott.ac.uk/~pszgmh/pih.html'>http://www.cs.nott.ac.uk/~pszgmh/pih.html</a> <a href='#fn-6' id='fnref6'><sup>6</sup></a> <a href='https://www.edx.org/course/introduction-functional-programming-delftx-fp101x-0'>https://www.edx.org/course/introduction-functional-programming-delftx-fp101x-0</a> <ol class='footnotes'><li id='fn-1'><a href='#fnref1'>&#8617;</a></li><li id='fn-2'><a href='#fnref2'>&#8617;</a></li><li id='fn-3'><a href='#fnref3'>&#8617;</a></li><li id='fn-4'><a href='#fnref4'>&#8617;</a></li><li id='fn-5'><a href='#fnref5'>&#8617;</a></li><li id='fn-6'><a href='#fnref6'>&#8617;</a></li></ol></p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/blog/tags/functional-programming folding/">functional-programming folding</a>
    
</div>


    <div id="prev-next">
        
        <a href="/blog/posts/2019-11-11-static-vs-dynamic-type-checking/">&laquo; Static vs dynamic type checking</a>
        
        
        <a class="right" href="/blog/posts/2019-11-11-expressions-vs-statements/">Expressions vs statements &raquo;</a>
        
    </div>

    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                <h3>Links</h3>
                <ul id="links">
                    <li><a href="http://cryogenweb.org/docs/home.html">Cryogen Docs</a></li>
                    <li><a href="http://carmenla.me/blog/archives">Carmen's Blog</a></li>
                    
                    <li><a href="/blog/pages/another-page/">Another Page</a></li>
                    
                </ul>
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/blog/posts/2019-11-11-programming-paradigms-explained/">Programming paradigms explained</a></li>
                        
                        <li><a href="/blog/posts/2019-11-11-function-closures/">Function closures</a></li>
                        
                        <li><a href="/blog/posts/2019-11-11-static-vs-dynamic-type-checking/">Static vs dynamic type checking</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3>Tags</h3>
                    <ul>
                        
                        <li><a href="/blog/tags/programming-paradigms/">programming-paradigms</a></li>
                        
                        <li><a href="/blog/tags/closures functional-programming/">closures functional-programming</a></li>
                        
                        <li><a href="/blog/tags/types/">types</a></li>
                        
                        <li><a href="/blog/tags/functional-programming folding/">functional-programming folding</a></li>
                        
                        <li><a href="/blog/tags/expressions statements/">expressions statements</a></li>
                        
                        <li><a href="/blog/tags/cryogen/">cryogen</a></li>
                        
                        <li><a href="/blog/tags/very fetch/">very fetch</a></li>
                        
                        <li><a href="/blog/tags/not fetch/">not fetch</a></li>
                        
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    <footer>Copyright &copy; 2019 roby-wan
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/blog/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
